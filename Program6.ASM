INCLUDE LIBMACRO.INC
PROGRAM JULIA
;_____________________________________________________________________________
;MNOZHENNIA MATRUTSI NA MATRUTSIY
;_____________________________________________________________________________
.DATA
VC DB 'VVEDIT CHUSLO = ',0
VDOB DB 'DOBYTOK ELEMENTU MATRUTSI NA MATRUTSIY:',0
VMA1 DB 'ELEMENTU MATRUTSI 1:',0
VMA2 DB 'ELEMENTU MATRUTSI 2:',0
VN DB 'VVEDIT ROSMIRNIST MATRUTSI 1. RYADKU N = ',0
VM DB 'VVEDIT ROSMIRNIST MATRUTSI 1. STOVPTSI M = ',0
VN2 DB 'VVEDIT ROSMIRNIST MATRUTSI 2. RYADKU N = ',0
VM2 DB 'VVEDIT ROSMIRNIST MATRUTSI 2. STOVPTSI M = ',0

F DW ?
D DW ?
K DW ?
N DW ?
M DW ?
S DW ?
K1 DW ? 
NM2 DW ?
MM2 DW ?
NM22 DW ?
N22 DW ?
M22 DW ?

MN DW ?
N2 DW ?
M2 DW ?
MAS DW 100 DUP(?)
MAS2 DW 100 DUP(?)
REZ DW 100 DUP(?)

START
MOV AX,03
INT 10H

;VVEDENNIA DANUX
;FOR MATR1
WLINEZ VN
RWORD N
MOV AX,2
IMUL N
MOV N2,AX
WLINEZ VM
RWORD M
MOV AX,2
IMUL M
MOV M2,AX
MOV AX,N
IMUL M
MOV MN,AX

;FOR MATR2
WLINEZ VN2
RWORD NM2
MOV AX,2
IMUL NM2
MOV N22,AX
WLINEZ VM2
RWORD MM2
MOV AX,2
IMUL MM2
MOV M22,AX
MOV AX,NM2
IMUL MM2
MOV NM22,AX

MOV AX,MM2         ;ZNAX KKOSTI ELEM REZ MATRUTSI
IMUL N
MOV K,AX

MOV CX,MN  ;ZCHUTUVANNIA MASUVU1
MOV SI,0
CKL:
WLINEZ VC
RWORD
MOV MAS[SI],AX
ADD SI,2
LOOP CKL

MOV CX,N   ;VUVEDENNIA MASUVU1
MOV SI,0
C1:PUSH CX
MOV CX,M
DEC CX
C2:WWORD MAS[SI]
ADD SI,2
MOV AX,M
CMP AX,1
JZ MK2
LOOP C2
MK2:WWORDLN MAS[SI]
ADD SI,2
POP CX
LOOP C1

MOV CX,NM22    ;ZCHUTUVANNIA MASUVU2
MOV SI,0
CKLL2:
WLINEZ VC
RWORD
MOV MAS2[SI],AX
ADD SI,2
LOOP CKLL2

MOV CX,NM2   ;VUVEDENNIA MASUVU2
MOV SI,0
C3:PUSH CX
MOV CX,MM2
DEC CX
C4:WWORD MAS2[SI]
ADD SI,2
MOV AX,MM2
CMP AX,1
JZ MK4
LOOP C4
MK4:WWORDLN MAS2[SI]
ADD SI,2
POP CX
LOOP C3  ;KINETS
LINEFEED

;MNOGENNIA
MOV CX,N
MOV DI,0
MOV K1,DI
MOV K,DI
MOV SI,0

CKLZZ:
PUSH CX
MOV CX,MM2
MOV BX,0

CKLLZ:
MOV DX,0
MOV F,DX
PUSH CX
MOV CX,M
INC S

CKLLV:
MOV AX,MAS[SI]
IMUL MAS2[BX]
ADD F,AX
ADD BX,M22
ADD SI,2

LOOP CKLLV

SUB SI,M2
MOV DX,F
MOV REZ[DI],DX
MOV BX,0
INC K1
MOV AX,K1
CMP AX,MM2
JNZ OK
MOV K1,BX
OK:

MOV AX,2
IMUL K1
MOV BX,AX
ADD DI,2
POP CX
LOOP CKLLZ

MOV SI,0
INC K
MOV AX,M2
IMUL K
MOV SI,AX
POP CX
LOOP CKLZZ

WLINEZ VDOB
LINEFEED
MOV CX,N
MOV SI,0
LINEFEED
CKLVUV:
PUSH CX
CMP MM2,1
JE M777
MOV CX,MM2
DEC CX
CKLVUV2:
WWORD REZ[SI]
ADD SI,2
LOOP CKLVUV2
M777:
WWORDLN REZ[SI]
ADD SI,2
POP CX
LOOP CKLVUV ;KINETS

PAUSE
RETURN
END JULIA